<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <title>ECM252 - jQuery</title>
    <link rel="stylesheet" type="text/css" href="css/estilos.css">
    <link rel="stylesheet" type="text/css" href="css/index.css">
    <link rel="stylesheet" type="text/css" href="css/index.css">
    <script src="js/jquery.js"></script>
    <!--Import Google Icon Font-->
    <link href="http://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <!--Import materialize.css-->
    <link type="text/css" rel="stylesheet" href="css/materialize.min.css" media="screen,projection" />
    <script type="text/javascript" src="js/selectize.min.js"></script>
    <link rel="stylesheet" type="text/css" href="css/selectize.default.css" />
</head>

<body>
    <div class="container">
        <!-- Logo Mauá -->
        <img src="img/maua_logo.png" class="logo">
        <!-- Frase aleatória -->
        <div class="frase" class="Material Icons">la lo la la</div>
        <!-- Botoes em cima do quadro -->
        <div class="centraliza">
            <i class="small material-icons"> description </i>
            <div class='num-pal-frase'></div>
        </div>
        <div class="centraliza">
            <i class="small material-icons"> query_builder </i>
            <div id="my-timer">
                <p id="show-time" style="display:inline;">10</p> segundos
            </div>
        </div>
        <!-- Quadro digitação -->
        <textarea class="campo-digitacao"></textarea>
        <!-- Botões abaixo do quadro-->
        <script type="text/javascript" src="js/materialize.min.js"></script>
        <a class="btn-floating btn-large waves-effect waves-light red"><i class="material-icons botao-recomecar">restore</i></a>
        <a class="btn-floating btn-large waves-effect waves-light green"><i class="material-icons botao-placar">assignment</i></a>
        <a class="btn-floating btn-large waves-effect waves-light blue"><i class="material-icons">shuffle</i></a>
        <a class="btn-floating btn-large waves-effect waves-light light-blue"><i class="material-icons">repeat_one</i></a>
        <!-- Selecionar nome -->
        <!--
        <div class="select-usuarios">
            <div class="input-field col s12">
                <select class="browser-default">
                    <option value="" disabled selected>Nome</option>
                    <option value="1">Lucas Rodrigues</option>
                    <option value="2">Raul</option>
                    <option value="3">Levon</option>
                </select>
            </div>
        </div>
        -->
        <div style="display: inline-block;">
            <div class="input-field">
                <select class="browser-default" style="width:200%;">
                    <option value="1">Lucas Rodrigues</option>
                    <option value="2">Raul</option>
                    <option value="3">Levon</option>
                </select>
            </div>
        </div>
        <div class="direita"><a class="btn-floating btn-large waves-effect waves-light yellow"><i class="material-icons" id="botao-sync">swap_vert</i></a></div>
        <div class='caracteres' style='text-align: center;'> 0 caracteres</div>
        <div class='num-pal-txta' style='text-align: center;'> 0 palavras</div>
        <div class="plc">
            <h3 style="text-align: center"> Placar </h3>
            <table class="bordered centered">
                <thead>
                    <tr>
                        <th>Nome</th>
                        <th>N° de palavras</th>
                        <th>Remover</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>Lucas</td>
                        <td>300</td>
                        <td class="centraliza"><a class="btn-floating btn-large waves-effect waves-light "><i class="material-icons">delete</i></a></td>
                    </tr>
                </tbody>
            </table>
        </div>
        <script>
        contagem = false;

        $(document).ready(function() {

            $('.plc').hide();
            $('select').material_select();
            $('.tooltipped').tooltip({
                delay: 50
            });
            $('select').selectize({
                create: true,
                sortField: 'text'
            });


            var words = $('.frase').html().split(' ');
            $('.num-pal-frase').text(words.length + ' palavras');

            $('.botao-recomecar').click(function() {
                $('.campo-digitacao').val('');
                atualiza();
            });
            $('.botao-placar').click(function() {
                $(".plc").toggle();
            });
            if (contagem) {
                var settimmer = 0;
                $(function() {
                    window.setInterval(function() {
                        var timeCounter = $("p[id=show-time]").html();
                        var updateTime = eval(timeCounter) - eval(1);
                        $("p[id=show-time]").html(updateTime);
                        if (updateTime == -1)
                            $("p[id=show-time]").html('10');

                    }, 1000);

                });
            }
        });



        var atualiza = function() {

            var campo = $(".campo-digitacao");
            var texto = $(".campo-digitacao").val(); //pega o texto digitado
            var frase = $(".frase").text();

            contagem = true;
            $('.caracteres').text(texto.length + ' caracteres');

            if ($("textarea").val()) {
                var words = $('.campo-digitacao').val().split(' ');
                $('.num-pal-txta').text(words.length + ' palavras');
            } else
                $('.num-pal-txta').text('0 palavras');

            if (frase.indexOf(texto) !== -1) {
                campo.css("border", "3px solid green");

            } else if (texto != frase) {
                campo.css("border", "3px solid red");

            }

        }


        $(".campo-digitacao").on('input', atualiza); //função atualiza é executada  toda vez que o textarea muda
        </script>
</body>

</html>
