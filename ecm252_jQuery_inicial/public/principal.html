<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <title>ECM252 - jQuery</title>
    <link rel="stylesheet" type="text/css" href="css/estilos.css">
    <link rel="stylesheet" type="text/css" href="css/index.css">
    <link rel="stylesheet" type="text/css" href="css/libs/google-fonts.css">
    <script src="js/jquery.js"></script>
    <!--Import Google Icon Font-->
    <link href="http://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <!--Import materialize.css-->
    <link type="text/css" rel="stylesheet" href="css/materialize.min.css" media="screen,projection" />
</head>

<body>
    <div class="container">
        <!-- Logo Mauá -->
        <img src="img/maua_logo.png" class="logo">
        <!-- Frase aleatória -->
        <div class="frase" class="Material Icons">la lo la la</div>
        <!-- Botoes em cima do quadro -->
        <div class="centraliza">
            <i class="small material-icons"> description </i>
            <div class='num-pal-frase'></div>
        </div>
        <div class="centraliza">
            <i class="small material-icons"> query_builder </i>
            <div id="my-timer">
                <b id="show-time">10</b> seconds
            </div>
        </div>
        <!-- Quadro digitação -->
        <textarea class="campo-digitacao"></textarea>
        <!-- Botões abaixo do quadro-->
        <script type="text/javascript" src="js/jquery.js"></script>
        <script type="text/javascript" src="js/materialize.min.js"></script>
        <a class="btn-floating btn-large waves-effect waves-light red"><i class="material-icons botao-recomecar">restore</i></a>
        <a class="btn-floating btn-large waves-effect waves-light green"><i class="material-icons">assignment</i></a>
        <a class="btn-floating btn-large waves-effect waves-light blue"><i class="material-icons">shuffle</i></a>
        <a class="btn-floating btn-large waves-effect waves-light light-blue"><i class="material-icons">repeat_one</i></a>
        <!-- Selecionar nome -->
        _____
        <div class="select-usuarios">
            <div class="input-field col s12">
                <select class="browser-default">
                    <option value="" disabled selected>Choose your option</option>
                    <option value="1">Lucas Rodrigues</option>
                    <option value="2">Raul</option>
                    <option value="3">Levon</option>
                </select>
            </div>
        </div>
        <div class="direita"><a class="btn-floating btn-large waves-effect waves-light yellow"><i class="material-icons" id="botao-sync">swap_vert</i></a></div>
        <div class='caracteres' style='text-align: center;'> 0 caracteres</div>
        <div class='num-pal-txta' style='text-align: center;'> 0 palavras</div>
        <script>
        $(document).ready(function() {
            $('select').material_select();
            $('.tooltipped').tooltip({
                delay: 50
            });

            var words = $('.frase').html().split(' ');
            $('.num-pal-frase').text(words.length + ' palavras');

            $('.botao-recomecar').click(function() {
                $('.campo-digitacao').val('');
                atualiza();
            });


            var settimmer = 0;
            $(function() {
                window.setInterval(function() {
                    var timeCounter = $("b[id=show-time]").html();
                    var updateTime = eval(timeCounter) - eval(1);
                    $("b[id=show-time]").html(updateTime);
                    if (updateTime == -1)
                        $("b[id=show-time]").html('10');

                }, 1000);

            });
        });



        var atualiza = function() {

            var campo = $(".campo-digitacao");
            var texto = $(".campo-digitacao").val(); //pega o texto digitado
            var frase = $(".frase").text();


            $('.caracteres').text(texto.length + ' caracteres');

            if ($("textarea").val()) {
                var words = $('.campo-digitacao').val().split(' ');
                $('.num-pal-txta').text(words.length + ' palavras');
            } else
                $('.num-pal-txta').text('0 palavras');

            if (texto == frase) {
                campo.css("border", "3px solid green");

            } else if (texto != frase) {
                campo.css("border", "3px solid red");

            }

        }


        $(".campo-digitacao").on('input', atualiza); //função atualiza é executada  toda vez que o textarea muda
        </script>
</body>

</html>
